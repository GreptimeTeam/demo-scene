---
processors:
  - date:
      fields:
        - timestamp
      formats:
        - "%Y-%m-%dT%H:%M:%SZ"
  - epoch:
      field: timestamp
      resolution: millisecond
      ignore_missing: true
  - dissect:
      field: agent
      patterns: 
        - "%{_prefix} (%{ua_platform}; %{_postfix}"
  - dissect:
      field: request
      patterns: 
        - "%{method} %{endpoint} %{protocol}"

transform:
  - fields:
      - client
      - ua_platform
      - referer
      - method
      - endpoint
      - protocol
    type: string
  - fields:
      - status
    type: uint16
  - fields:
      - size
    type: float64
  - fields:
      - agent
    type: string
    # index: fulltext
  - field: timestamp, access_time
    type: epoch, millisecond
    index: timestamp
